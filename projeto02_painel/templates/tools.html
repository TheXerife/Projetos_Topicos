{% extends 'base.html' %}
{% block content %}
<h4 class="mb-4 text-success">Ferramentas Interativas</h4>

<div class="row g-3">
  <div class="col-md-6">
    <div class="card p-3">
      <h6 class="text-success">Ping</h6>
      <input id="pingHost" type="text" class="form-control mb-2" placeholder="Digite o endereÃ§o...">
      <button class="btn btn-success w-100" onclick="pingHost()">Testar</button>
      <pre id="pingResult" class="mt-2 small text-light bg-dark p-2 rounded" style="height:150px;overflow:auto;"></pre>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card p-3">
      <h6 class="text-success">Gerar QR Code</h6>
      <input id="qrText" type="text" class="form-control mb-2" placeholder="Texto para o QR Code...">
      <button class="btn btn-success w-100" onclick="generateQR()">Gerar</button>
      <div id="qrCode" class="text-center mt-3"></div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/qrcode"></script>
<script>
function pingHost() {
  const host = document.getElementById('pingHost').value;
  fetch(`/api/ping?host=${host}`).then(r => r.text()).then(t => {
    document.getElementById('pingResult').textContent = t;
  });
}
function generateQR() {
  const text = document.getElementById('qrText').value;
  document.getElementById('qrCode').innerHTML = '';
  new QRCode(document.getElementById('qrCode'), text);
}
</script>
{% endblock %}
